<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <link href="css/common.css" type="text/css" rel="styleSheet">
    <link href="css/problem.css" type="text/css" rel="styleSheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="js/jquery.min.js"></script>
    <link rel="stylesheet" href="css/layui.css">
    <link rel="stylesheet" href="css/modules/layer/default/layer.css">
    <link href="css/bootstrap-theme.css" type="text/css" rel="styleSheet">
    <link href="css/bootstrap.css" type="text/css" rel="styleSheet">
    <script src="js/bootstrap.min.js"></script>
</head>
<body>
<table class="layui-table" id="myTable">
		<thead>
			<tr align="center" class="table_header" height="22">
				<th style="width: 10%; text-align: center">编号</th>
				<th style="width: 45%; text-align: center">名称</th>
				<th style="width: 10%; text-align: center">分值</th>
				<th style="width: 40%; text-align: center">删除-子选项</th>
			</tr>
		</thead>
		<tbody id="ChoiceList" bgcolor="#D7EBFF" align="center" style="color: black">
		</tbody>
	</table>
	<button type="button" class="btn btn-default btn-sm"
		style="margin: 10px;margin-left:42%" data-toggle="modal" data-target="#add_Modal">
		<span class="glyphicon glyphicon-plus"></span> 添加选项
	</button>
	</div>
	<div class="modal fade" id="add_Modal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">添加选项</h4>
				</div>
				<div class="form-group big_input">
					<label>题目内容：</label> <input type="text" class="form-control"
						placeholder="请输入题目内容" id="pro_info">
				</div>
				<div class="form-group big_input">
					<label>题目分数：</label> <input type="text" class="form-control"
						placeholder="请输入题目分数" id="pro_score">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					<button type="button" class="btn btn-primary" id="add_choice" data-dismiss="modal">确定</button>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal -->
	</div>
</body>
<script type="text/javascript">
//添加选项
$("#add_choice").click(function(){
	  if(pid == 0){
		  alert("请先选择题目");
	  }
	  else{
		  //alert(pid);
		  var choice_info = $("#pro_info").val();
		  var choice_score = $("#pro_score").val();
		  $('#add_Modal').modal('toggle');
		    $.post(
		            "MentalTest/AddChoice",
		            {
		            	choice_flag:"problem",
		            	choice_score:choice_score,
		            	choice_sub:0,
		            	choice_info:choice_info,
		            	choice_type:1,
		            	flag_id:pid,
		            },
					function(data){
						var data = JSON.parse(data);
						var result = data.result;
						if(result == "Success"){
							alert("添加成功");
							$("#ChoiceList").html("");
							InitChoiceTable();

							//data-dismiss="modal"
						}
						else{
							alert("添加失败！");
						}
					}
		        );
	  }
})
</script>
</html>